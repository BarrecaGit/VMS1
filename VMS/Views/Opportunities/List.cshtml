@model OpportunitiesListViewModel

@{
    ViewData["Title"] = "Browse Opportunities";
}

<h2>View Posts</h2>
<ol class="breadcrumb">
    <li class="breadcrumb-item"><a asp-area="" asp-controller="Home" asp-action="Index">Home</a></li>
    <li class="breadcrumb-item active">Browse</li>
</ol>
<div class="row">
    <!--left-->
    <div class="col col-md-3">
        <h4>Filters</h4>
        @using (Html.BeginForm())
        {
            <p>
                Search: @Html.TextBox("SearchString", null, new { @class = "form-control" })
            </p>
        }
        <button type="button" class="btn btn-outline-primary btn-block ml-3 dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
            Sort By
        </button>
        <div class="dropdown-menu">
            @Html.ActionLink("Last created", "List", new { sortOrder = ViewBag.DateSortParm }, new { @class = "dropdown-item" })
            @*<a type="button" class="dropdown-item" asp-action="">No signups</a>*@
            @Html.ActionLink("Name Desc.", "List", new { sortOrder = ViewBag.NameSortParm }, new { @class = "dropdown-item" })
            <div class="dropdown-divider"></div>
            <a type="button" class="dropdown-item" asp-action="List">All</a>
        </div>
    </div>

    @*<div class="col col-md-3">
            <p>@Html.ActionLink("Creation Date", "List", new { sortOrder = ViewBag.DateSortParm })</p>
            <p>@Html.ActionLink("Name Desc", "List", new { sortOrder = ViewBag.NameSortParm})</p>
        </div>*@

    <!--right-->
<div class="col col-md-9">
    @if (Model.PagingInfo.TotalItems.Equals(0))
    {
        <p class="fs-4 fw-bold">No Results Found</p>
    }
    @foreach (var p in Model.Opportunities)
    {
        <div class="card rounded mb-5 p-2">
            <div class="card-body">
                <p class="fs-4 fw-bold">@Html.DisplayFor(modelItem => p.OpportunityName)</p><p>Volunteers Needed: @(p.VolunteersNeeded - p.VolunteersApplied)</p><hr />
                <p class="font-weight-light">@Html.DisplayFor(modelItem => p.City), @Html.DisplayFor(modelItem => p.State)</p>
                <p>@Html.DisplayFor(modelItem => p.Description)</p>

                <!-- Button trigger modal -->
                @*<button type="button" class="btn btn-primary" data-toggle="modal" data-target="#applyModal">
                        Apply
                    </button>

                    <!-- Modal -->
                    <div class="modal fade" id="applyModal" tabindex="-1" role="dialog" aria-labelledby="applyModalLabel" aria-hidden="true">
                        <div class="modal-dialog" role="document">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h5 class="modal-title" id="exampleModalLabel">Would you like to apply for...</h5>
                                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                        <span aria-hidden="true">&times;</span>
                                    </button>
                                </div>
                                <div class="modal-body">
                                    <h5>@item.OpportunityName</h5>
                                    <h6>Start: @item.StartDate</h6>
                                    <h6>End: @item.EndDate</h6>
                                </div>
                                <div class="modal-footer">
                                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                                    <a class="btn btn-primary" asp-area="" asp-route-oppID="@item.Id" asp-controller="Opportunities" asp-action="Apply">Apply</a>
                                </div>
                            </div>
                        </div>
                    </div>*@
                <a class="btn btn-outline-info btn-rounded" asp-area="" asp-controller="Opportunities" asp-action="PublicDetails" asp-route-id="@p.Id">See Details</a>
            </div>
        </div>

    }
    <div page-model="@Model.PagingInfo" page-action="List" page-classes-enabled="true"
         page-class="btn" page-class-normal="btn-outline-primary"
         page-class-selected="btn-info" class="btn-group float-right">
    </div>

</div>
</div>